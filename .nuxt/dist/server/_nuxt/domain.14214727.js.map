{"version":3,"file":"domain.14214727.js","sources":["../../../../pages/dashboard/domain.vue"],"sourcesContent":["<script setup lang=\"ts\">\nconst profile = useProfile()\n\nconst payload = ref({ subdomain: profile.value.subdomain })\nconst isSaving = ref(false)\nconst { save } = useProfileSave(payload)\nconst saveDomain = async () => {\n  // validate here\n  try {\n    isSaving.value = true\n\n    // add domain and check first\n    const data = await $fetch(\"/api/add-domain\", {\n      method: \"POST\",\n      body: {\n        domain: payload.value.subdomain,\n      },\n    })\n    console.log(data)\n\n    await Promise.all([save(), checkDomain()])\n  } catch (err) {\n    console.log(err)\n  } finally {\n    isSaving.value = false\n  }\n}\n\nconst isCheckingDomain = ref(false)\nconst isValid = ref(false)\nconst checkDomain = async () => {\n  isCheckingDomain.value = true\n  const { valid } = await $fetch(\"/api/check-domain\", {\n    method: \"POST\",\n    body: {\n      domain: payload.value.subdomain,\n    },\n  })\n  isValid.value = valid\n  isCheckingDomain.value = false\n}\n\nonMounted(() => {\n  if (profile.value.domains.active) {\n    isValid.value = true\n  } else if (!payload.value.subdomain) {\n    isValid.value = false\n  } else {\n    checkDomain()\n  }\n})\n</script>\n\n<template>\n  <div class=\"w-full\">\n    <div class=\"flex w-full justify-end\">\n      <Button :loading=\"isSaving\" @click=\"saveDomain\" class=\"mb-8 btn-primary\"\n        >Save <span class=\"ml-2\">âŒ˜S</span></Button\n      >\n    </div>\n\n    <div class=\"flex items-center\">\n      <label for=\"domain\" class=\"flex-shrink-0 mr-2\">Domain :</label>\n      <input\n        type=\"text\"\n        name=\"domain\"\n        id=\"domain\"\n        class=\"bg-white\"\n        v-model=\"payload.subdomain\"\n        placeholder=\"https://foo.bar.com\"\n      />\n    </div>\n\n    <div v-if=\"!isValid && payload.subdomain\">\n      <Button :loading=\"isCheckingDomain\" class=\"btn-plain mt-12\" @click=\"checkDomain\">Check domain</Button>\n\n      <div class=\"mt-4 bg-white p-6 rounded-2xl\">\n        <p>Set the following record on your DNS provider to continue:</p>\n\n        <div class=\"mt-6 flex items-center space-x-6\">\n          <div class=\"flex-shrink-0 justify-start\">\n            <p>Type</p>\n            <p>CNAME</p>\n          </div>\n          <div class=\"flex-shrink-0\">\n            <p>Name</p>\n            <p>{{ payload.subdomain.split(\".\")[0] }}</p>\n          </div>\n          <div class=\"flex-grow\">\n            <p>Value</p>\n            <p>cname.vercel-dns.com</p>\n          </div>\n        </div>\n\n        <div class=\"mt-4 text-sm text-gray-400\">\n          Depending on your provider, it might take some time for the changes to apply.\n\n          <NuxtLink target=\"_blank\" to=\"https://vercel.com/guides/why-is-my-vercel-domain-unverified\"\n            >Learn More</NuxtLink\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,UAAA,UAAA;AAEA,UAAA,UAAA,IAAA,EAAA,WAAA,QAAA,MAAA,UAAA,CAAA;AACA,UAAA,WAAA,IAAA,KAAA;AACA,UAAA,EAAA,KAAA,IAAA,eAAA,OAAA;AACA,UAAA,aAAA,YAAA;AAEE,UAAA;AACE,iBAAA,QAAA;AAGA,cAAA,OAAA,MAAA,OAAA,mBAAA;AAAA,UAA6C,QAAA;AAAA,UACnC,MAAA;AAAA,YACF,QAAA,QAAA,MAAA;AAAA,UACkB;AAAA,QACxB,CAAA;AAEF,gBAAA,IAAA,IAAA;AAEA,cAAA,QAAA,IAAA,CAAA,KAAA,GAAA,YAAA,CAAA,CAAA;AAAA,MAAyC,SAAA,KAAA;AAEzC,gBAAA,IAAA,GAAA;AAAA,MAAe,UAAA;AAEf,iBAAA,QAAA;AAAA,MAAiB;AAAA,IACnB;AAGF,UAAA,mBAAA,IAAA,KAAA;AACA,UAAA,UAAA,IAAA,KAAA;AACA,UAAA,cAAA,YAAA;AACE,uBAAA,QAAA;AACA,YAAA,EAAA,MAAA,IAAA,MAAA,OAAA,qBAAA;AAAA,QAAoD,QAAA;AAAA,QAC1C,MAAA;AAAA,UACF,QAAA,QAAA,MAAA;AAAA,QACkB;AAAA,MACxB,CAAA;AAEF,cAAA,QAAA;AACA,uBAAA,QAAA;AAAA,IAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}