{"version":3,"file":"_slug_.16a155a1.js","sources":["../../../../pages/user/[siteId]/[slug].vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { format } from \"date-fns\"\nimport { Posts } from \"~~/utils/types\"\nimport { stripHtml } from \"string-strip-html\"\nimport { constructUrl } from \"~~/utils/functions\"\n\nconst client = useSupabaseClient()\nconst { params } = useRoute()\nconst url = useUrl()\n\nconst { data, pending } = useAsyncData(`posts-${params.slug}`, async () => {\n  const { data } = await client\n    .from<Posts>(\"posts\")\n    .select(\"*, profiles(avatar_url, name, username)\")\n    .eq(\"slug\", params.slug)\n    .single()\n  return data\n})\n\nuseCustomHead(\n  computed(() => data.value?.title),\n  computed(() => (data.value?.body ? stripHtml(data.value?.body)?.result?.slice(0, 160) : undefined)),\n  computed(() => (data.value?.cover_img === \"\" ? `${url}/og/${params.slug}` : data.value?.cover_img))\n)\n\nconst fullUrl = computed(() => constructUrl(data.value, false))\n</script>\n\n<template>\n  <div>\n    <Transition name=\"fade\" mode=\"out-in\">\n      <article class=\"prose mx-auto w-full\" v-if=\"!pending && data\">\n        <div class=\"not-prose flex items-center pt-8 pb-4\">\n          <NuxtImg class=\"w-12 h-12 rounded-full mr-4\" :src=\"data.profiles.avatar_url\"></NuxtImg>\n          <div>\n            <h3 class=\"text-lg\">{{ data.profiles?.name }}</h3>\n            <h4 class=\"text-sm text-gray-400\">{{ format(new Date(data.created_at), \"MMMM d\") }}</h4>\n          </div>\n        </div>\n        <h1>{{ data.title }}</h1>\n\n        <NuxtImg v-if=\"data.cover_img\" :src=\"data.cover_img\" class=\"my-8 w-full h-auto\"></NuxtImg>\n\n        <!-- <Tiptap v-model=\"data.body\"></Tiptap> -->\n        <div v-html=\"data.body\"></div>\n\n        <hr />\n\n        <div class=\"not-prose mt-2 flex items-center space-x-2\">\n          <NuxtLink\n            class=\"px-1 text-2xl text-gray-300 focus:text-dark-300 hover:text-dark-300 transition\"\n            :to=\"`https://twitter.com/intent/tweet?url=${fullUrl}&text=Check%20out%20this%20new%20post`\"\n            target=\"_blank\"\n          >\n            <div class=\"i-mdi-twitter\"></div>\n          </NuxtLink>\n          <NuxtLink\n            class=\"px-1 text-2xl text-gray-300 focus:text-dark-300 hover:text-dark-300 transition\"\n            :to=\"`https://www.facebook.com/sharer/sharer.php?u=${fullUrl}`\"\n            target=\"_blank\"\n          >\n            <div class=\"i-mdi-facebook\"></div\n          ></NuxtLink>\n          <NuxtLink\n            class=\"px-1 text-2xl text-gray-300 focus:text-dark-300 hover:text-dark-300 transition\"\n            :to=\"`https://www.linkedin.com/shareArticle?mini=true&url=${fullUrl}`\"\n            target=\"_blank\"\n          >\n            <div class=\"i-mdi-linkedin\"></div\n          ></NuxtLink>\n        </div>\n\n        <!-- <div>More posts</div> -->\n\n        <!-- <div>Comments</div> -->\n      </article>\n      <Loader v-else></Loader>\n    </Transition>\n  </div>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,UAAA,SAAA;AACA,UAAA,EAAA,WAAA;AACA,UAAA,MAAA;AAEA,UAAA,EAAA,MAAA,QAAA,IAAA,aAAA,SAAA,OAAA,QAAA,YAAA;AACE,YAAA,EAAA,MAAA,MAAA,IAAA,MAAA,OAAA,KAAA,OAAA,EAAA,OAAA,yCAAA,EAAA,GAAA,QAAA,OAAA,IAAA,EAAA;AAKA,aAAA;AAAA,IAAO,CAAA;AAGT;AAAA,MAAA,SAAA,MAAA;;AAAA,0BAAA,UAAA,mBAAA;AAAA,OAAA;AAAA,MACkC,SAAA,MAAA;;AAAA,2BAAA,UAAA,mBAAA,SAAA,sBAAA,UAAA,UAAA,mBAAA,IAAA,MAAA,mBAAA,WAAA,mBAAA,MAAA,GAAA,OAAA;AAAA,OAAA;AAAA,MACkE,SAAA,MAAA;;AAAA,2BAAA,UAAA,mBAAA,eAAA,KAAA,GAAA,UAAA,OAAA,UAAA,UAAA,UAAA,mBAAA;AAAA,OAAA;AAAA,IACA;AAGpG,UAAA,UAAA,SAAA,MAAA,aAAA,KAAA,OAAA,KAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}