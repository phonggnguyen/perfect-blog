import{p as n,q as i,s as v,r as c,x as f}from"./entry.fab98536.js";import{r as p}from"./functions.5b35a2ea.js";const d=()=>n("profile",()=>null),S=s=>{const a=i(),r=v(),o=c(!1),t=async()=>{var l;o.value=!0,console.log("save profile settings",s.value),console.log("save profile user",a.value);const e=a.value.app_metadata.provider==="facebook";console.log({isFacebook:e}),e&&(s.value.avatar_url=a.value.user_metadata.avatar_url,s.value.username=p(a.value.user_metadata.name).replaceAll(" ","").toLowerCase());const{data:u}=await r.from("profiles").upsert({...s.value,id:(l=a.value)==null?void 0:l.id}).single();console.log({data:u}),o.value=!1};return f({passive:!1,onEventFired(e){(e.ctrlKey||e.metaKey)&&e.key==="s"&&e.type==="keydown"&&(e.preventDefault(),t())}}),{save:t,isSaving:o}};export{S as a,d as u};
