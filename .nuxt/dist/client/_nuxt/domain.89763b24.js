import{a as g,r as t,b as x,o as v,e as p,f as e,h as d,w as u,i as k,v as w,t as S,j as n,k as C,l as D,m as N}from"./entry.fab98536.js";import{u as V,a as P}from"./dashboard.a6b88858.js";import"./functions.5b35a2ea.js";const T={class:"w-full"},B={class:"flex w-full justify-end"},M=e("span",{class:"ml-2"},"\u2318S",-1),j={class:"flex items-center"},$=e("label",{for:"domain",class:"flex-shrink-0 mr-2"},"Domain :",-1),E={key:0},L={class:"mt-4 bg-white p-6 rounded-2xl"},O=e("p",null,"Set the following record on your DNS provider to continue:",-1),A={class:"mt-6 flex items-center space-x-6"},U=e("div",{class:"flex-shrink-0 justify-start"},[e("p",null,"Type"),e("p",null,"CNAME")],-1),q={class:"flex-shrink-0"},z=e("p",null,"Name",-1),F=e("div",{class:"flex-grow"},[e("p",null,"Value"),e("p",null,"cname.vercel-dns.com")],-1),G={class:"mt-4 text-sm text-gray-400"},Q=g({__name:"domain",setup(H){const m=V(),a=t({subdomain:m.value.subdomain}),l=t(!1),{save:f}=P(a),h=async()=>{try{l.value=!0;const s=await $fetch("/api/add-domain",{method:"POST",body:{domain:a.value.subdomain}});console.log(s),await Promise.all([f(),c()])}catch(s){console.log(s)}finally{l.value=!1}},i=t(!1),o=t(!1),c=async()=>{i.value=!0;const{valid:s}=await $fetch("/api/check-domain",{method:"POST",body:{domain:a.value.subdomain}});o.value=s,i.value=!1};return x(()=>{m.value.domains.active?o.value=!0:a.value.subdomain?c():o.value=!1}),(s,r)=>{const _=D,b=N;return v(),p("div",T,[e("div",B,[d(_,{loading:l.value,onClick:h,class:"mb-8 btn-primary"},{default:u(()=>[n("Save "),M]),_:1},8,["loading"])]),e("div",j,[$,k(e("input",{type:"text",name:"domain",id:"domain",class:"bg-white","onUpdate:modelValue":r[0]||(r[0]=y=>a.value.subdomain=y),placeholder:"https://foo.bar.com"},null,512),[[w,a.value.subdomain]])]),!o.value&&a.value.subdomain?(v(),p("div",E,[d(_,{loading:i.value,class:"btn-plain mt-12",onClick:c},{default:u(()=>[n("Check domain")]),_:1},8,["loading"]),e("div",L,[O,e("div",A,[U,e("div",q,[z,e("p",null,S(a.value.subdomain.split(".")[0]),1)]),F]),e("div",G,[n(" Depending on your provider, it might take some time for the changes to apply. "),d(b,{target:"_blank",to:"https://vercel.com/guides/why-is-my-vercel-domain-unverified"},{default:u(()=>[n("Learn More")]),_:1})])])])):C("",!0)])}}});export{Q as default};
