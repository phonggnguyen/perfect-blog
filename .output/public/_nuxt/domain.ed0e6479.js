import{_ as g}from"./Button.vue_vue_type_style_index_0_lang.a355e8f2.js";import{a as x,r as t,b as k,e as v,f as e,h as d,w as u,i as w,v as S,t as C,j as n,k as D,l as N,o as p}from"./entry.35b9f3be.js";import{u as V,a as P}from"./dashboard.8f143b7b.js";import"./index.adc8bbd4.js";import"./functions.0aa32198.js";const T={class:"w-full"},B={class:"flex w-full justify-end"},M=e("span",{class:"ml-2"},"\u2318S",-1),j={class:"flex items-center"},$=e("label",{for:"domain",class:"flex-shrink-0 mr-2"},"Domain :",-1),E={key:0},L={class:"mt-4 bg-white p-6 rounded-2xl"},O=e("p",null,"Set the following record on your DNS provider to continue:",-1),A={class:"mt-6 flex items-center space-x-6"},U=e("div",{class:"flex-shrink-0 justify-start"},[e("p",null,"Type"),e("p",null,"CNAME")],-1),q={class:"flex-shrink-0"},z=e("p",null,"Name",-1),F=e("div",{class:"flex-grow"},[e("p",null,"Value"),e("p",null,"cname.vercel-dns.com")],-1),G={class:"mt-4 text-sm text-gray-400"},W=x({__name:"domain",setup(H){const m=V(),a=t({subdomain:m.value.subdomain}),i=t(!1),{save:f}=P(a),h=async()=>{try{i.value=!0;const o=await $fetch("/api/add-domain",{method:"POST",body:{domain:a.value.subdomain}});console.log(o),await Promise.all([f(),c()])}catch(o){console.log(o)}finally{i.value=!1}},l=t(!1),s=t(!1),c=async()=>{l.value=!0;const{valid:o}=await $fetch("/api/check-domain",{method:"POST",body:{domain:a.value.subdomain}});s.value=o,l.value=!1};return k(()=>{m.value.domains.active?s.value=!0:a.value.subdomain?c():s.value=!1}),(o,r)=>{const _=g,b=N;return p(),v("div",T,[e("div",B,[d(_,{loading:i.value,onClick:h,class:"mb-8 btn-primary"},{default:u(()=>[n("Save "),M]),_:1},8,["loading"])]),e("div",j,[$,w(e("input",{type:"text",name:"domain",id:"domain",class:"bg-white","onUpdate:modelValue":r[0]||(r[0]=y=>a.value.subdomain=y),placeholder:"https://foo.bar.com"},null,512),[[S,a.value.subdomain]])]),!s.value&&a.value.subdomain?(p(),v("div",E,[d(_,{loading:l.value,class:"btn-plain mt-12",onClick:c},{default:u(()=>[n("Check domain")]),_:1},8,["loading"]),e("div",L,[O,e("div",A,[U,e("div",q,[z,e("p",null,C(a.value.subdomain.split(".")[0]),1)]),F]),e("div",G,[n(" Depending on your provider, it might take some time for the changes to apply. "),d(b,{target:"_blank",to:"https://vercel.com/guides/why-is-my-vercel-domain-unverified"},{default:u(()=>[n("Learn More")]),_:1})])])])):D("",!0)])}}});export{W as default};
